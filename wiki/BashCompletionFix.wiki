#How to Fix Bash Completion

= Introduction =

bash-completion includes command line completion for procps. It defines a function called _pnames in /etc/bash_completion which depends on ps. In fact it uses BSD options of ps under Linux. killall, for example, will fail. 


= Details =

To fix this, as of Bash version 4.1.5, is redefining your own _pnames function with ps equivalent sans BSD options.

For the lazy ones, just paste these lines at the bottom of your $HOME/.bashrc:
{{{
_pnames()
{
    COMPREPLY=( $( compgen -X '<defunct>' -W '$( command ps -eo command= | \
        sed -e "s/ .*//" -e "s:.*/::" -e "s/:$//" -e "s/^[[(-]//" \
            -e "s/[])]$//" | sort -u )' -- "$cur" ) )
}
}}}

This should work, hopefully.